webpackJsonp([1],{11:function(t,e,n){"use strict";var o=n(250),s=n(248),r=n(249);n.d(e,"c",function(){return o.a}),n.d(e,"b",function(){return s.a}),n.d(e,"a",function(){return r.a})},168:function(t,e,n){function o(t){n(190)}var s=n(8)(n(256),n(175),o,null,null);t.exports=s.exports},169:function(t,e,n){function o(t){n(192)}var s=n(8)(n(257),n(177),o,null,null);t.exports=s.exports},170:function(t,e,n){function o(t){n(196)}var s=n(8)(n(258),n(181),o,null,null);t.exports=s.exports},171:function(t,e,n){function o(t){n(193)}var s=n(8)(n(259),n(178),o,null,null);t.exports=s.exports},172:function(t,e,n){function o(t){n(197)}var s=n(8)(n(260),n(182),o,null,null);t.exports=s.exports},173:function(t,e,n){function o(t){n(194)}var s=n(8)(n(261),n(179),o,null,null);t.exports=s.exports},174:function(t,e,n){function o(t){n(195)}var s=n(8)(n(262),n(180),o,null,null);t.exports=s.exports},175:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",[t._v(t._s(t.msg))])])},staticRenderFns:[]}},176:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},177:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"create-hook"},[n("label",{staticClass:"btn-return",on:{click:t.clickReturn}},[n("i",{staticClass:"el-icon-arrow-left"}),t._v("返回")]),t._v(" "),n("div",{staticClass:"center-panel"},[n("el-card",{staticClass:"left"},[n("div",{staticClass:"header",slot:"header"},[t._v("远程终端")]),t._v(" "),n("code",{ref:"terminalPanel",staticClass:"terminal-panel",on:{click:t.focusToInput}},[t._l(t.inputHistory,function(e,o){return n("ul",[n("li",[n("i",{staticClass:"arrow"},[t._v("➜")]),t._v(t._s(e.order))]),t._v(" "),t._l(t.response(e.response),function(e,o){return n("li",{domProps:{innerHTML:t._s(e)}})})],2)}),t._v(" "),n("div",{staticClass:"input"},[n("label",{staticClass:"pwd"},[n("i",{staticClass:"arrow"},[t._v("➜")]),t._v(t._s(t.getCwd()))]),t._v(" "),n("input",{ref:"terminalInput",attrs:{type:"text",autofocus:""},on:{keyup:[function(e){return("button"in e||75===e.keyCode)&&e.ctrlKey?void t.onClearHistory(e):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.onEnterOrder(e)}]}})])],2)]),t._v(" "),n("el-card",{staticClass:"right"},[n("div",{staticClass:"header",slot:"header"},[t._v("目标命令栏")]),t._v(" "),n("div",{staticClass:"result-panel"},t._l(t.results,function(e,o){return n("el-tag",[n("el-tooltip",{key:o,attrs:{content:e,placement:"left"}},[n("label",[t._v(t._s(e))])]),t._v(" "),n("i",{staticClass:"el-icon-document"}),t._v(" "),n("i",{staticClass:"el-icon-delete",on:{click:function(e){t.onDelOrder(o)}}})],1)}))])],1),t._v(" "),n("el-button",{staticClass:"btn-save",attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("保存")]),t._v(" "),n("el-dialog",{attrs:{title:"保存",visible:t.dialogFormVisible,size:"tiny"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{attrs:{"label-width":"90px"},on:{submit:function(e){e.preventDefault(),t.onSave(e)}},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[n("el-form-item",{attrs:{label:"HOOK名称"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.name,callback:function(e){t.form.name=e},expression:"form.name"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:function(e){e.preventDefault(),t.onSave(e)}}},[t._v("确 定")]),t._v(" "),n("el-button",{on:{click:t.onReset}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]}},178:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("div",{staticClass:"left"},[n("div",{staticClass:"logo",on:{click:t.onClickLogo}},[t._v("\n      HOOKS\n    ")]),t._v(" "),n("el-menu",{attrs:{"default-active":"1",theme:"dark",router:!0}},[n("el-menu-item",{attrs:{index:"1",route:{name:"hookList"}}},[n("i",{staticClass:"el-icon-menu"}),t._v("列表")]),t._v(" "),n("el-menu-item",{attrs:{index:"2",route:{name:"ssh"}}},[n("i",{staticClass:"el-icon-menu"}),t._v("SSH")]),t._v(" "),n("el-menu-item",{attrs:{index:"4"},on:{click:t.logout}},[n("i",{staticClass:"el-icon-setting"}),t._v("退出")])],1)],1),t._v(" "),n("div",{staticClass:"center"},[n("router-view")],1)])},staticRenderFns:[]}},179:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ssh"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){e.preventDefault(),t.toCreate(e)}}},[t._v("新增")]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:"","highlight-current-row":"",height:"100%"}},[n("el-table-column",{attrs:{label:"名称",prop:"name",width:"130"}}),t._v(" "),n("el-table-column",{attrs:{label:"IP",prop:"ip",width:"130"}}),t._v(" "),n("el-table-column",{attrs:{label:"端口",prop:"port",width:"130"}}),t._v(" "),n("el-table-column",{attrs:{label:"用户名",prop:"userName",width:"130"}}),t._v(" "),n("el-table-column",{attrs:{label:"密码",prop:"password",width:"130"}}),t._v(" "),n("el-table-column",{attrs:{label:"密匙地址",prop:"privateKey"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){t.onDel(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"创建SSH配置",visible:t.showDialog,size:"tiny"},on:{"update:visible":function(e){t.showDialog=e}}},[n("el-form",{attrs:{"label-width":"90px"},model:{value:t.createForm,callback:function(e){t.createForm=e},expression:"createForm"}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{ref:"name",attrs:{"auto-complete":"off"},model:{value:t.createForm.name,callback:function(e){t.createForm.name=e},expression:"createForm.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"IP"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.createForm.ip,callback:function(e){t.createForm.ip=e},expression:"createForm.ip"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"端口"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.createForm.port,callback:function(e){t.createForm.port=e},expression:"createForm.port"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.createForm.userName,callback:function(e){t.createForm.userName=e},expression:"createForm.userName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.createForm.password,callback:function(e){t.createForm.password=e},expression:"createForm.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密匙地址"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.createForm.privateKey,callback:function(e){t.createForm.privateKey=e},expression:"createForm.privateKey"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:function(e){e.preventDefault(),t.onSave(e)}}},[t._v("确 定")]),t._v(" "),n("el-button",{on:{click:t.onReset}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]}},180:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"init-db"},[n("h2",{staticClass:"title"},[t._v("初始化数据库配置")]),t._v(" "),n("el-form",{ref:"form",attrs:{"label-width":"90px",model:t.form,rules:t.rules}},[n("el-form-item",{attrs:{label:"host",prop:"host"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.host,callback:function(e){t.form.host=e},expression:"form.host"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"port",prop:"port"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.port,callback:function(e){t.form.port=e},expression:"form.port"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"user",prop:"user"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.user,callback:function(e){t.form.user=e},expression:"form.user"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"password",prop:"password"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.password,callback:function(e){t.form.password=e},expression:"form.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"database",prop:"database"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.database,callback:function(e){t.form.database=e},expression:"form.database"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:function(e){e.preventDefault(),t.onSave(e)}}},[t._v("确 定")]),t._v(" "),n("el-button",{on:{click:t.onReset}},[t._v("取 消")])],1)],1)},staticRenderFns:[]}},181:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hook-list"},[n("div",{staticClass:"top-panel"},[n("el-button",{attrs:{type:"primary"},on:{click:t.clickCreate}},[n("i",{staticClass:"el-icon-plus el-icon--left"}),t._v("创建")]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.hookList,border:"",stripe:"","highlight-current-row":"",height:"100%"}},[n("el-table-column",{attrs:{label:"名称",prop:"name",width:"130"}}),t._v(" "),n("el-table-column",{attrs:{label:"调用地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.getAddr(e.row))+"\n          "),n("el-tag",{staticClass:"copy-btn",attrs:{"data-clipboard-text":t.getAddr(e.row)},on:{click:function(n){t.handleEdit(e.$index,e.row)}}},[t._v("\n            复制\n          ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"命令详情"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.command,function(e,o){return n("el-tag",{staticStyle:{"margin-right":"5px"}},[t._v(t._s(e))])})}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){t.testOrder(e.row)}}},[t._v("\n            调用\n          ")]),t._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(n){t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){t.onDel(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"提示",visible:t.showDelWarning,size:"tiny"},on:{"update:visible":function(e){t.showDelWarning=e}}},[n("span",[t._v('确定要删除配置"'+t._s(t.toDel&&t.toDel.name)+'"吗')]),t._v(" "),n("span",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(e){t.showDelWarning=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.onConfirmDel}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]}},182:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"panel"},[n("el-form",{on:{submit:function(e){e.preventDefault(),t.login(e)}},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}},[n("div",{staticClass:"item"},[n("el-input",{attrs:{name:"hooksUsername",size:"large",placeholder:"用户名或邮箱",autofocus:!0,"auto-complete":"off"},model:{value:t.user.name,callback:function(e){t.user.name=e},expression:"user.name"}})],1),t._v(" "),n("div",{staticClass:"item"},[n("el-input",{attrs:{name:"hooksPwd",size:"large",placeholder:"密码",type:"password","auto-complete":"off"},model:{value:t.user.password,callback:function(e){t.user.password=e},expression:"user.password"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:function(e){e.preventDefault(),t.login(e)}}},[t._v("登录")]),t._v(" "),n("el-checkbox",[t._v("记住密码")])],1)],1)])},staticRenderFns:[]}},19:function(t,e,n){"use strict";var o=n(51);n(254);n.d(e,"a",function(){return o.b})},190:function(t,e){},191:function(t,e){},192:function(t,e){},193:function(t,e){},194:function(t,e){},195:function(t,e){},196:function(t,e){},197:function(t,e){},247:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),s=n(50),r=n(91),a=n.n(r),i=n(96),l=n(92),c=n.n(l),u=n(94),f=n(95),d=n(51),p=n(93);n.n(p);o.default.config.productionTip=!1,o.default.use(a.a),o.default.use(s.a),o.default.use(i.a),n.i(d.a)(u.a);var m=new i.a.Store({modules:f.a});new o.default({el:"#app",router:u.a,store:m,template:"<App/>",components:{App:c.a}})},248:function(t,e,n){"use strict";e.a={hook:{create:"createHook",query:"queryHooks",del:"delHook"},user:{getUser:"getUser",login:"login"},ssh:{create:"createSSh",query:"querySShList",del:"deleteSSh"}}},249:function(t,e,n){"use strict";e.a={hook:{updateList:"updateList",add:"addHook",del:"delHook"},ssh:{add:"addSShConfig",del:"deleteSSh",updateList:"updateSShList"}}},250:function(t,e,n){"use strict";e.a={SUCCESS:1,ERROR:0,INVALID_USER:-1,PARAM_ERROR:-2,NOT_FOUND_DB_CONFIG:-3}},251:function(t,e,n){"use strict";var o,s,r=n(29),a=n.n(r),i=n(49),l=n.n(i),c=n(19),u=n(11);e.a={state:{list:[]},mutations:(o={},l()(o,u.a.hook.updateList,function(t,e){t.list=e}),l()(o,u.a.hook.add,function(t,e){t.list.push(e)}),l()(o,u.a.hook.del,function(t,e){for(var n=0,o=t.list.length;n<o;n++)if(t.list[n].id===e){t.list.splice(n,1);break}}),o),actions:(s={},l()(s,u.b.hook.create,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:"",command:""};return new a.a(function(o,s){n.i(c.a)({url:"/hook/create",method:"post",data:e}).then(function(e){t.commit(u.a.hook.add,e.data),o()}).catch(function(){s()})})}),l()(s,u.b.hook.query,function(t){return new a.a(function(e,o){n.i(c.a)({url:"/hook/query",method:"post"}).then(function(n){t.commit(u.a.hook.updateList,n.data),e()}).catch(function(){o()})})}),l()(s,u.b.hook.del,function(t,e){return new a.a(function(o,s){n.i(c.a)({url:"/hook/delete",method:"post",data:{id:e}}).then(function(){t.commit(u.a.hook.del,e),o()}).catch(function(){s()})})}),s)}},252:function(t,e,n){"use strict";var o,s,r=n(29),a=n.n(r),i=n(49),l=n.n(i),c=n(19),u=n(11),f={state:{list:[]},mutations:(o={},l()(o,u.a.ssh.updateList,function(t,e){t.list=e}),l()(o,u.a.ssh.add,function(t,e){t.list.push(e)}),l()(o,u.a.ssh.del,function(t,e){for(var n=0,o=t.list.length;n<o;n++)if(t.list[n].name===e){t.list.splice(n,1);break}}),o),actions:(s={},l()(s,u.b.ssh.create,function(t,e){return new a.a(function(o,s){n.i(c.a)({url:"/ssh/create",method:"post",data:e}).then(function(e){t.commit(u.a.ssh.add,e.data),o(e)}).catch(function(){s()})})}),l()(s,u.b.ssh.query,function(t){return new a.a(function(e,o){n.i(c.a)({url:"/ssh/query",method:"post"}).then(function(n){t.commit(u.a.ssh.updateList,n.data),e()}).catch(function(){o()})})}),l()(s,u.b.ssh.del,function(t,e){return new a.a(function(o,s){n.i(c.a)({url:"/ssh/del",method:"post",data:{name:e}}).then(function(){t.commit(u.a.ssh.del,e),o()}).catch(function(){s()})})}),s)};e.a=f},253:function(t,e,n){"use strict";var o,s=n(49),r=n.n(s),a=n(29),i=n.n(a),l=n(19),c=n(11);e.a={state:{current:{id:"",name:"",token:"",email:"",password:""}},mutations:{setUser:function(t,e){t.current=e}},actions:(o={},r()(o,c.b.user.getUser,function(t){return new i.a(function(e,o){n.i(l.a)({url:"/users/getCurrent",method:"post"}).then(function(n){n.status===c.c.SUCCESS?(t.commit("setUser",n.data),e()):o()}).catch(function(){o()})})}),r()(o,c.b.user.login,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:"",password:""};return new i.a(function(o,s){n.i(l.a)({url:"/users/login",method:"post",data:e}).then(function(e){e.status===c.c.SUCCESS?(t.commit("setUser",e.data),o()):s()}).catch(function(t){s()})})}),o)}},254:function(t,e,n){"use strict";var o=n(90);n.n(o)},255:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},256:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"list",data:function(){return{msg:"list"}}}},257:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(90),s=n.n(o),r=n(186),a=n.n(r),i=n(11),l=null;e.default={name:"create",data:function(){return{dialogFormVisible:!1,inputHistory:[],cwd:"",results:[],form:{name:""}}},mounted:function(){var t=this;l=a()("/"),l.on("terminal",function(e){t.inputHistory.push(e),t.cwd=e.cwd||t.cwd,setTimeout(function(){t.$refs.terminalPanel.scrollTop=999999})})},beforeDestroy:function(){l.close()},methods:{clickReturn:function(){this.$router.replace({name:"hookList"})},focusToInput:function(){this.$refs.terminalInput.focus()},onEnterOrder:function(){var t=this.$refs.terminalInput.value.trim();t&&(this.results.push(t),l.emit("terminal",{order:t,cwd:this.cwd}),this.$refs.terminalInput.value="")},response:function(t){return t.split(/\n/).map(function(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\s/g,"&nbsp")})},getCwd:function(){var t=this.cwd.split("/");return t[t.length-1]},onClearHistory:function(){this.inputHistory=[],this.results=[]},onReset:function(){this.dialogFormVisible=!1,this.form.name="",this.form.description=""},checkParam:function(t){var e=!0,n="";return t.name?this.results.length?/\bssh\b/.test(t.command)&&!/^ssh\b/.test(this.results[0])&&(e=!1,n="如果要使用ssh登录，请确保ssh命令位于命令集首位"):(e=!1,n="命令集不能为空"):(e=!1,n="hook名称不能为空"),e||this.$message({message:n,type:"error"}),e},onSave:function(){var t=this,e={name:this.form.name,command:s()(this.results)};this.checkParam(e)&&this.$store.dispatch(i.b.hook.create,e).then(function(){t.onReset(),t.$router.push({name:"hookList"})}).catch(function(){t.$message({message:"创建失败",type:"error"})})},onDelOrder:function(t){this.results.splice(t,1)}}}},258:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(11),s=n(167),r=n.n(s),a=n(19);e.default={name:"main",data:function(){return{copyRes:"Copied",content:"",clipboard:null,showDelWarning:!1,toDel:null}},computed:{currentUser:function(){return this.$store.state.user.current},hookList:function(){return this.$store.state.hook.list}},mounted:function(){var t=this;this.$store.dispatch(o.b.hook.query).catch(function(){t.$message({message:"列表查询失败",type:"error"})}),this.clipboard=new r.a(".copy-btn");var e=this;this.clipboard.on("success",function(){e.copyRes="Copied",e.showCopyTip=!0,e.$message(e.copyRes)}),this.clipboard.on("error",function(){e.copyRes="Press Ctrl+C to copy",e.showCopyTip=!0,e.$message({message:e.copyRes,type:"error"})})},methods:{getAddr:function(t){return location.protocol+"//"+this.currentUser.address+(location.port?":"+location.port:"")+"/api/"+this.currentUser.token+"/"+t.id},handleEdit:function(t){console.log(t)},onDel:function(t){this.toDel=t,this.showDelWarning=!0},onConfirmDel:function(){var t=this;this.$store.dispatch(o.b.hook.del,this.toDel.id).catch(function(){t.$message({type:"error",message:"删除失败"})}),this.showDelWarning=!1},clickCreate:function(){this.$router.push({name:"createHook"})},testOrder:function(t){var e=this;n.i(a.a)({url:this.getAddr(t),method:"post"}).then(function(t){console.log(t),e.$message("调用成功")}).catch(function(t){e.$message({message:"调用失败",type:"error"}),console.error("调用失败",t)})}}}},259:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(19);e.default={name:"main",methods:{onClickLogo:function(){this.$router.push("/")},logout:function(){var t=this;n.i(o.a)({url:"/users/logout",method:"post"}).then(function(){t.$router.push("/login")}).catch(function(){t.$message({message:"退出失败",type:"error"})})}}}},260:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"login",data:function(){return{user:{name:"",password:""}}},beforeCreate:function(){console.log("检查是否系统已经初始化")},methods:{login:function(){var t=this;this.$store.dispatch("login",this.user).then(function(){t.$router.replace({name:"hookList"})}).catch(function(){t.$message({message:"用户名或密码错误",type:"error"})})}}}},261:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(11);e.default={name:"list",data:function(){return{showDialog:!1,createForm:{name:"",ip:"",port:22,userName:"",password:"",privateKey:""}}},computed:{list:function(){return this.$store.state.ssh.list}},mounted:function(){var t=this;this.$store.dispatch(o.b.ssh.query).catch(function(){t.$message({message:"获取配置列表失败",type:"error"})})},methods:{toCreate:function(){this.showDialog=!0,this.$refs.name&&this.$refs.name.$el.focus()},onDel:function(t){var e=this;this.$store.dispatch(o.b.ssh.del,t.name).catch(function(){e.$message({message:"删除配置失败",type:"error"})})},onSave:function(){var t=this;this.$store.dispatch(o.b.ssh.create,this.createForm).catch(function(){t.$message({message:"创建ssh配置失败",type:"error"})}),this.onReset()},onReset:function(){this.showDialog=!1,this.createForm={name:"",ip:"",port:20,userName:"",password:"",privateKey:""}}}}},262:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(19);e.default={name:"initDb",data:function(){var t={host:function(t,e,n){e?n():n(new Error("host地址不能为空"))},port:function(t,e,n){e?n():n(new Error("端口号不能为空"))},user:function(t,e,n){e?n():n(new Error("用户名不能为空"))},password:function(t,e,n){e?n():n(new Error("密码不能为空"))},database:function(t,e,n){e?n():n(new Error("默认数据库不能为空"))}};return{form:{host:"",port:"",user:"",password:"",database:""},rules:{host:[{required:!0,validator:t.host}],port:[{required:!0,validator:t.port}],user:[{required:!0,validator:t.user}],password:[{required:!0,validator:t.password}],database:[{required:!0,validator:t.database}]}}},methods:{onReset:function(){this.form={host:"",port:"",user:"",password:"",database:""}},onSave:function(){var t=this;this.$refs.form.validate(function(e){e&&n.i(o.a)({url:"/users/initDbConfig",method:"post",data:t.form}).then(function(e){t.$router.push("/login")}).catch(function(){t.$message({message:"配置失败",type:"error"})})})}}}},263:function(t,e){},51:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return u});var o=n(29),s=n.n(o),r=n(102),a=n.n(r),i=n(11),l=null,c=function(t){return new s.a(function(e,n){a()(t).then(function(t){t.data.status===i.c.SUCCESS?e(t.data):t.data.status===i.c.INVALID_USER?l.push("/login"):t.data.status===i.c.NOT_FOUND_DB_CONFIG?l.push("/initDb"):n(t.data)}).catch(function(t){n(t)})})},u=function(t){l=t}},92:function(t,e,n){function o(t){n(191)}var s=n(8)(n(255),n(176),o,null,null);t.exports=s.exports},93:function(t,e){},94:function(t,e,n){"use strict";var o=n(50),s=n(172),r=n.n(s),a=n(171),i=n.n(a),l=n(170),c=n.n(l),u=n(169),f=n.n(u),d=n(168),p=n.n(d),m=n(173),h=n.n(m),v=n(174),b=n.n(v),_=new o.a({routes:[{path:"/",component:i.a,redirect:{name:"hookList"},children:[{path:"hook/list",name:"hookList",component:c.a},{path:"hook/create",name:"createHook",component:f.a},{path:"ssh",name:"ssh",component:h.a},{path:"history",name:"history",component:p.a}]},{path:"/login",name:"login",component:r.a},{path:"/initDb",name:"initDb",component:b.a}],mode:"history"});e.a=_},95:function(t,e,n){"use strict";var o=n(253),s=n(251),r=n(252);e.a={user:o.a,hook:s.a,ssh:r.a}}},[247]);
//# sourceMappingURL=app.5815e69b31d00ba09e81.js.map